<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>DSDEV Dashboard</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- External CSS -->
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body data-theme="dark">
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <a href="#" class="logo">DSDEV</a>
            
            <!-- Header Controls -->
            <div class="header-controls">
                <button class="btn btn-primary" id="streamToggle">
                    <svg class="icon icon-sm" viewBox="0 0 20 20" id="streamIcon">
                        <polygon points="7,5 7,15 15,10" fill="currentColor" stroke="none" />
                    </svg>
                    <span class="btn-text" id="streamText">Start All Streams</span>
                </button>
                
                <!-- Display Options Dropdown -->
                <div class="dropdown" id="configDropdown">
                    <button class="btn btn-secondary" data-dropdown="configDropdown">
                        <svg class="icon icon-sm" viewBox="0 0 20 20">
                            <path d="M4 6h2v2H4zM10 6h6M4 12h2v2H4zM10 12h6M4 18h2v2H4zM10 18h6" />
                        </svg>
                        <span class="btn-text">Display</span>
                    </button>
                    <div class="dropdown-menu">
                        <div class="dropdown-section">
                            <div class="dropdown-label">Grid Layout</div>
                            <div class="grid-options">
                                <div class="grid-option">
                                    <input type="radio" name="gridLayout" id="grid1x1" value="grid-1x1">
                                    <label for="grid1x1">1×1</label>
                                </div>
                                <div class="grid-option">
                                    <input type="radio" name="gridLayout" id="grid2x2" value="grid-2x2" checked>
                                    <label for="grid2x2">2×2</label>
                                </div>
                                <div class="grid-option">
                                    <input type="radio" name="gridLayout" id="grid3x3" value="grid-3x3">
                                    <label for="grid3x3">3×3</label>
                                </div>
                                <div class="grid-option">
                                    <input type="radio" name="gridLayout" id="grid4x4" value="grid-4x4">
                                    <label for="grid4x4">4×4</label>
                                </div>
                            </div>
                        </div>
                        <div class="dropdown-section">
                            <div class="dropdown-label">Display Options</div>
                            <div class="dropdown-item">
                                <span>Show Project Names</span>
                                <div class="toggle-switch active" id="showProjectNamesToggle">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>
                            <div class="dropdown-item">
                                <span>Show Camera Names</span>
                                <div class="toggle-switch active" id="showCameraNamesToggle">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>
                            <div class="dropdown-item">
                                <span>Show Timestamps</span>
                                <div class="toggle-switch active" id="showTimestampsToggle">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>
                            <div class="dropdown-item">
                                <span>Fit to Screen</span>
                                <div class="toggle-switch" id="fitToScreenToggle">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>
                            <div class="dropdown-item">
                                <span>Dark Mode</span>
                                <div class="toggle-switch active" id="darkModeToggle">
                                    <div class="toggle-slider"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Content Area -->
        <main class="content-area">
            <!-- Camera Grid -->
            <div class="camera-grid grid-2x2" id="cameraGrid">
                <!-- Camera Card 1 - Online with Video -->
                <div class="camera-card" draggable="true" data-camera-id="1" data-project="downtown-tower" data-camera-name="North Entrance" data-camera-type="video">
                    <div class="camera-feed">
                        <!-- Remove Button -->
                        <button class="camera-remove-btn" data-action="removeCamera" title="Remove Camera">
                            <svg class="icon icon-sm" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                                <path d="M6 6L14 14M6 14L14 6" />
                            </svg>
                        </button>
                        
                        <!-- Video for live feed -->
                        <video class="camera-video" muted loop playsinline preload="metadata" poster="https://images.unsplash.com/photo-1504917595217-d4dc5ebe6122?w=800&h=450&fit=crop&q=80&fm=jpg">
                            <source src="https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/360/Big_Buck_Bunny_360_10s_1MB.mp4" type="video/mp4">
                        </video>
                        
                        <!-- Loading indicator -->
                        <div class="camera-loading">
                            <div class="loading-spinner"></div>
                        </div>
                        
                        <!-- Video Controls -->
                        <div class="video-controls">
                            <button class="video-control-btn" data-action="startLiveView" title="Start Live View">
                                <svg class="icon icon-sm" viewBox="0 0 20 20">
                                    <polygon points="7,5 7,15 15,10" fill="currentColor" stroke="none" />
                                </svg>
                            </button>
                            <button class="video-control-btn" data-action="openCameraView" title="Open Camera View Page">
                                <svg class="icon icon-sm" viewBox="0 0 20 20">
                                    <path d="M11 3H3C2.44772 3 2 3.44772 2 4V16C2 16.5523 2.44772 17 3 17H15C15.5523 17 16 16.5523 16 16V8" />
                                    <path d="M9 11L17 3" />
                                    <path d="M17 3H12M17 3V8" />
                                </svg>
                            </button>
                            <button class="video-control-btn" data-action="toggleFullscreen" title="Enter Fullscreen">
                                <svg class="icon icon-sm" viewBox="0 0 20 20">
                                    <path d="M3 6V3H6M14 3H17V6M17 14V17H14M6 17H3V14" />
                                </svg>
                            </button>
                        </div>
                        
                        <div class="camera-overlay">
                            <div class="camera-info">
                                <div class="camera-details">
                                    <h3>
                                        <span class="status-indicator"></span>
                                        North Entrance
                                    </h3>
                                    <p>Downtown Tower Project</p>
                                    <p style="font-size: 12px; opacity: 0.7;">2024-01-15 14:32:18</p>
                                </div>
                                <div class="camera-status">
                                    <div class="status-row">
                                        <svg class="icon icon-sm" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                                            <path d="M23 7L16 12L23 17V7Z"/>
                                            <rect x="1" y="5" width="15" height="14" rx="2"/>
                                        </svg>
                                        <span>Video • Paused</span>
                                    </div>
                                    <div class="battery-indicator">
                                        <div class="battery-bar">
                                            <div class="battery-level" style="width: 24.7px;"></div>
                                            <div class="battery-cap"></div>
                                        </div>
                                        <span>85%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fullscreen controls -->
                        <div class="fullscreen-controls">
                            <button class="fullscreen-control-btn" data-action="startLiveView" title="Start Live View">
                                <svg class="icon" viewBox="0 0 20 20">
                                    <polygon points="7,5 7,15 15,10" fill="currentColor" stroke="none" />
                                </svg>
                            </button>
                            <button class="fullscreen-control-btn" data-action="exitFullscreen" title="Exit Fullscreen">
                                <svg class="icon" viewBox="0 0 20 20">
                                    <path d="M6 3V6H3M3 14V17H6M14 17H17V14M17 6V3H14" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Camera Card 2 - Online with Static Image -->
                <div class="camera-card" draggable="true" data-camera-id="2" data-project="downtown-tower" data-camera-name="Loading Dock" data-camera-type="image">
                    <div class="camera-feed">
                        <!-- Remove Button -->
                        <button class="camera-remove-btn" data-action="removeCamera" title="Remove Camera">
                            <svg class="icon icon-sm" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                                <path d="M6 6L14 14M6 14L14 6" />
                            </svg>
                        </button>
                        
                        <!-- Static image for paused/snapshot view -->
                        <img class="camera-media" src="https://images.unsplash.com/photo-1504917595217-d4dc5ebe6122?w=800&h=450&fit=crop&q=80&fm=jpg" alt="Loading Dock - Construction Site View">
                        
                        <!-- Loading indicator -->
                        <div class="camera-loading">
                            <div class="loading-spinner"></div>
                        </div>
                        
                        <!-- Video Controls -->
                        <div class="video-controls">
                            <button class="video-control-btn" data-action="openCameraView" title="Open Camera View Page">
                                <svg class="icon icon-sm" viewBox="0 0 20 20">
                                    <path d="M11 3H3C2.44772 3 2 3.44772 2 4V16C2 16.5523 2.44772 17 3 17H15C15.5523 17 16 16.5523 16 16V8" />
                                    <path d="M9 11L17 3" />
                                    <path d="M17 3H12M17 3V8" />
                                </svg>
                            </button>
                            <button class="video-control-btn" data-action="toggleFullscreen" title="Enter Fullscreen">
                                <svg class="icon icon-sm" viewBox="0 0 20 20">
                                    <path d="M3 6V3H6M14 3H17V6M17 14V17H14M6 17H3V14" />
                                </svg>
                            </button>
                        </div>
                        
                        <div class="camera-overlay">
                            <div class="camera-info">
                                <div class="camera-details">
                                    <h3>
                                        <span class="status-indicator"></span>
                                        Loading Dock
                                    </h3>
                                    <p>Downtown Tower Project</p>
                                    <p style="font-size: 12px; opacity: 0.7;">2024-01-15 14:32:18</p>
                                </div>
                                <div class="camera-status">
                                    <div class="status-row">
                                        <svg class="icon icon-sm" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                                            <rect x="3" y="3" width="14" height="14" rx="2"/>
                                            <circle cx="10" cy="10" r="3"/>
                                            <path d="M21 15L15.5 9.5L10 15"/>
                                        </svg>
                                        <span>Image</span>
                                    </div>
                                    <div class="battery-indicator">
                                        <div class="battery-bar">
                                            <div class="battery-level" style="width: 26.7px;"></div>
                                            <div class="battery-cap"></div>
                                        </div>
                                        <span>92%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fullscreen controls -->
                        <div class="fullscreen-controls">
                            <button class="fullscreen-control-btn" data-action="exitFullscreen" title="Exit Fullscreen">
                                <svg class="icon" viewBox="0 0 20 20">
                                    <path d="M6 3V6H3M3 14V17H6M14 17H17V14M17 6V3H14" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Camera Card 3 - Offline -->
                <div class="camera-card" draggable="true" data-camera-id="3" data-project="downtown-tower" data-camera-name="East Perimeter" data-camera-type="image">
                    <div class="camera-feed">
                        <!-- Remove Button -->
                        <button class="camera-remove-btn" data-action="removeCamera" title="Remove Camera">
                            <svg class="icon icon-sm" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                                <path d="M6 6L14 14M6 14L14 6" />
                            </svg>
                        </button>
                        
                        <!-- Offline state with last known image -->
                        <img class="camera-media" src="https://images.unsplash.com/photo-1541888946425-d81bb19240f5?w=800&h=450&fit=crop&q=80&fm=jpg" alt="East Perimeter - Last Known Image" style="opacity: 0.5; filter: grayscale(100%);">
                        
                        <div class="camera-offline">
                            <svg class="icon icon-lg" viewBox="0 0 24 24">
                                <path d="M1 1L23 23" />
                                <path d="M16.72 11.06L23 7V17L19.28 14.72M16 5H3C1.89543 5 1 5.89543 1 7V17C1 18.1046 1.89543 19 3 19H16" />
                            </svg>
                            <span>Camera Offline</span>
                        </div>
                        
                        <div class="camera-overlay">
                            <div class="camera-info">
                                <div class="camera-details">
                                    <h3>
                                        <span class="status-indicator offline"></span>
                                        East Perimeter
                                    </h3>
                                    <p>Downtown Tower Project</p>
                                    <p style="font-size: 12px; opacity: 0.7;">Last seen: 13:45:32</p>
                                </div>
                                <div class="camera-status">
                                    <div class="status-row">
                                        <svg class="icon icon-sm" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                                            <rect x="3" y="3" width="14" height="14" rx="2"/>
                                            <circle cx="10" cy="10" r="3"/>
                                            <path d="M21 15L15.5 9.5L10 15"/>
                                        </svg>
                                        <span>Offline</span>
                                    </div>
                                    <div class="battery-indicator" style="color: var(--color-error-500);">
                                        <div class="battery-bar" style="border-color: var(--color-error-500);">
                                            <div class="battery-level" style="width: 3.5px; background-color: var(--color-error-500);"></div>
                                            <div class="battery-cap" style="background-color: var(--color-error-500);"></div>
                                        </div>
                                        <span>12%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Camera Card 4 - Online with Video -->
                <div class="camera-card" draggable="true" data-camera-id="4" data-project="riverside-complex" data-camera-name="Crane Platform" data-camera-type="video">
                    <div class="camera-feed">
                        <!-- Remove Button -->
                        <button class="camera-remove-btn" data-action="removeCamera" title="Remove Camera">
                            <svg class="icon icon-sm" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                                <path d="M6 6L14 14M6 14L14 6" />
                            </svg>
                        </button>
                        
                        <!-- Different video for variety -->
                        <video class="camera-video" muted loop playsinline preload="metadata" poster="https://images.unsplash.com/photo-1590736969955-71cc94901144?w=800&h=450&fit=crop&q=80&fm=jpg">
                            <source src="https://test-videos.co.uk/vids/bigbuckbunny/mp4/h264/360/Big_Buck_Bunny_360_10s_2MB.mp4" type="video/mp4">
                        </video>
                        
                        <!-- Loading indicator -->
                        <div class="camera-loading">
                            <div class="loading-spinner"></div>
                        </div>
                        
                        <!-- Video Controls -->
                        <div class="video-controls">
                            <button class="video-control-btn" data-action="startLiveView" title="Start Live View">
                                <svg class="icon icon-sm" viewBox="0 0 20 20">
                                    <polygon points="7,5 7,15 15,10" fill="currentColor" stroke="none" />
                                </svg>
                            </button>
                            <button class="video-control-btn" data-action="openCameraView" title="Open Camera View Page">
                                <svg class="icon icon-sm" viewBox="0 0 20 20">
                                    <path d="M11 3H3C2.44772 3 2 3.44772 2 4V16C2 16.5523 2.44772 17 3 17H15C15.5523 17 16 16.5523 16 16V8" />
                                    <path d="M9 11L17 3" />
                                    <path d="M17 3H12M17 3V8" />
                                </svg>
                            </button>
                            <button class="video-control-btn" data-action="toggleFullscreen" title="Enter Fullscreen">
                                <svg class="icon icon-sm" viewBox="0 0 20 20">
                                    <path d="M3 6V3H6M14 3H17V6M17 14V17H14M6 17H3V14" />
                                </svg>
                            </button>
                        </div>
                        
                        <div class="camera-overlay">
                            <div class="camera-info">
                                <div class="camera-details">
                                    <h3>
                                        <span class="status-indicator"></span>
                                        Crane Platform
                                    </h3>
                                    <p>Riverside Complex</p>
                                    <p style="font-size: 12px; opacity: 0.7;">2024-01-15 14:32:18</p>
                                </div>
                                <div class="camera-status">
                                    <div class="status-row">
                                        <svg class="icon icon-sm" viewBox="0 0 20 20" fill="none" stroke="currentColor">
                                            <path d="M23 7L16 12L23 17V7Z"/>
                                            <rect x="1" y="5" width="15" height="14" rx="2"/>
                                        </svg>
                                        <span>Video • Paused</span>
                                    </div>
                                    <div class="battery-indicator">
                                        <div class="battery-bar">
                                            <div class="battery-level" style="width: 19.4px;"></div>
                                            <div class="battery-cap"></div>
                                        </div>
                                        <span>67%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Fullscreen controls -->
                        <div class="fullscreen-controls">
                            <button class="fullscreen-control-btn" data-action="startLiveView" title="Start Live View">
                                <svg class="icon" viewBox="0 0 20 20">
                                    <polygon points="7,5 7,15 15,10" fill="currentColor" stroke="none" />
                                </svg>
                            </button>
                            <button class="fullscreen-control-btn" data-action="exitFullscreen" title="Exit Fullscreen">
                                <svg class="icon" viewBox="0 0 20 20">
                                    <path d="M6 3V6H3M3 14V17H6M14 17H17V14M17 6V3H14" />
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Add Camera Card -->
                <div class="add-camera-card" data-action="openCameraSelection">
                    <div class="add-camera-icon">
                        <svg class="icon" viewBox="0 0 20 20" stroke-width="2">
                            <path d="M10 5V15M5 10H15" />
                        </svg>
                    </div>
                    <span>Add Camera</span>
                </div>
            </div>
        </main>
    </div>

    <!-- Camera Selection Modal -->
    <div class="modal-overlay" id="cameraSelectionModal">
        <div class="camera-selection-modal">
            <div class="modal-header">
                <h2 class="modal-title">Add Camera Feed</h2>
                <button class="modal-close" data-action="closeCameraSelection">
                    <svg class="icon icon-sm" viewBox="0 0 20 20">
                        <path d="M6 6L14 14M6 14L14 6" />
                    </svg>
                </button>
            </div>
            
            <div class="modal-content">
                <div class="projects-sidebar">
                    <div class="project-item active" data-project="downtown-tower">
                        <div class="project-name">Downtown Tower</div>
                        <div class="project-cameras-count">8 cameras</div>
                    </div>
                    <div class="project-item" data-project="riverside-complex">
                        <div class="project-name">Riverside Complex</div>
                        <div class="project-cameras-count">12 cameras</div>
                    </div>
                    <div class="project-item" data-project="industrial-park-b">
                        <div class="project-name">Industrial Park B</div>
                        <div class="project-cameras-count">15 cameras</div>
                    </div>
                    <div class="project-item" data-project="metro-station">
                        <div class="project-name">Metro Station</div>
                        <div class="project-cameras-count">6 cameras</div>
                    </div>
                    <div class="project-item" data-project="harbor-development">
                        <div class="project-name">Harbor Development</div>
                        <div class="project-cameras-count">10 cameras</div>
                    </div>
                </div>
                
                <div class="cameras-grid-container">
                    <div class="cameras-grid" id="availableCamerasGrid">
                        <!-- Cameras will be populated here -->
                    </div>
                </div>
            </div>
            
            <div class="modal-footer">
                <button class="btn btn-secondary" data-action="closeCameraSelection">Cancel</button>
                <button class="btn btn-primary" data-action="addSelectedCameras" id="addCamerasBtn" disabled>Add Selected</button>
            </div>
        </div>
    </div>

    <!-- External JavaScript -->
    <script src="./js/data.js"></script>
    <script src="./js/camera-management.js"></script>
    <script src="./js/ui-controls.js"></script>
    <script src="./js/drag-drop.js"></script>
    <script src="./js/main.js"></script>
</body>
</html>